<Window x:Class="EduGate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:EduGate.Views.Accountants"
        Title="EduGate"
        Height="700"
        Width="1200"
        FlowDirection="RightToLeft"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        WindowStyle="None">

    <Grid Background="Transparent">
        <!-- Outer rounded shell -->
        <Border CornerRadius="26"
                Background="{StaticResource PageBgBrush}"
                Effect="{StaticResource WindowShadow}">

            <Grid>
                <Grid.ColumnDefinitions>
                    <!-- ✅ أصغرنا السايدبار -->
                    <ColumnDefinition Width="280"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ===== Sidebar ===== -->
                <Border Grid.Column="0"
                        CornerRadius="26,0,0,26"
                        Background="{StaticResource SidebarGradient}"
                        MouseLeftButtonDown="Sidebar_MouseLeftButtonDown">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Brand (✅ أصغرنا الخطوط والمسافات) -->
                        <StackPanel Margin="14,16,14,10" HorizontalAlignment="Center">
                            <TextBlock Text="EduGate"
                                       Foreground="White"
                                       FontSize="22"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="Smart ERP Dashboard"
                                       Foreground="#CCFFFFFF"
                                       FontSize="11"
                                       Margin="0,4,0,0"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>

                        <!-- Quick glance card (✅ أصغرناها) -->
                        <Border Grid.Row="1"
                                Margin="14,6,14,10"
                                CornerRadius="16"
                                Background="#16FFFFFF"
                                Padding="12"
                                Effect="{StaticResource SoftGlow}">
                            <StackPanel>
                                <TextBlock Text="نظرة سريعة"
                                           Foreground="#EEFFFFFF"
                                           FontWeight="SemiBold"
                                           FontSize="12"
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="إدارة المخزون • فواتير • طلبات • محاسبين"
                                           Foreground="#CCFFFFFF"
                                           FontSize="10"
                                           Margin="0,6,0,0"
                                           TextAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <!-- Nav (✅ سيبنا الـ Items زي ما هي) -->
                        <ListBox x:Name="NavListBox"
                                 Grid.Row="2"
                                 Style="{StaticResource NavListStyle}"
                                 ItemContainerStyle="{StaticResource NavItemStyle}"
                                 Margin="8,0,8,0">

                            <ListBoxItem Content="👤 المستخدمين"/>
                            <ListBoxItem Content="🧮 المحاسبين"/>
                            <ListBoxItem Content="📦 المخزون"/>
                            <ListBoxItem Content="🧾 الفواتير"/>
                            <ListBoxItem Content="🛒 الطلبات"/>
                            <ListBoxItem Content="💰 المصروفات"/>
                            <ListBoxItem Content="🏷️ الأصناف"/>
                            <ListBoxItem Content="🚚 الموردين"/>
                            <ListBoxItem Content="🔐 المصادقة"/>

                        </ListBox>

                        <!-- Bottom controls (✅ شغالة + ✅ دائرية + Hover) -->
                        <StackPanel Grid.Row="3"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,12,0,14">

                            <!-- Close -->
                            <Button Width="48" Height="40" Margin="7,0"
                                    Background="#E11D48" Foreground="White"
                                    BorderThickness="0"
                                    Content="✕"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Cursor="Hand"
                                    Click="Close_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="Bd"
                                                CornerRadius="14"
                                                Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.92"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.82"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.55"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <!-- Max/Restore -->
                            <Button Width="48" Height="40" Margin="7,0"
                                    Background="#1F2937" Foreground="White"
                                    BorderThickness="0"
                                    Content="▢"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Cursor="Hand"
                                    Click="Max_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="Bd"
                                                CornerRadius="14"
                                                Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.92"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.82"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.55"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <!-- Minimize -->
                            <Button Width="48" Height="40" Margin="7,0"
                                    Background="#111827" Foreground="White"
                                    BorderThickness="0"
                                    Content="—"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Cursor="Hand"
                                    Click="Min_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="Bd"
                                                CornerRadius="14"
                                                Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.92"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.82"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.55"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ===== Main area ===== -->
                <Grid Grid.Column="1" Margin="18">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <local:AccountantsTopBar Grid.Row="0"
                                            x:Name="AccountantsTopBarControl"
                                            Visibility="Collapsed"/>

                    <Border Grid.Row="1"
                            Margin="0,14,0,0"
                            Style="{StaticResource CardStyle}">
                        <Frame x:Name="MainFrame"
                               NavigationUIVisibility="Hidden"
                               Background="Transparent"/>
                    </Border>
                </Grid>

            </Grid>
        </Border>
    </Grid>
</Window>
