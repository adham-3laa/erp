<Window x:Class="erp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="The First"
        Height="700"
        Width="1200"
        FlowDirection="RightToLeft"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        WindowStyle="None">

    <Window.Resources>
        <!-- إضافة Style بسيط للأزرار -->
        <Style x:Key="SimpleButton" TargetType="Button">
            <Setter Property="Background" Value="#1E1B4B"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid x:Name="RootGrid"
          Background="Transparent">
        <!-- Outer rounded shell -->
        <Border CornerRadius="26"
                Background="#F5F6FA"
                Effect="{StaticResource WindowShadow}">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ===== Sidebar ===== -->
                <Border x:Name="Sidebar"
                        Grid.Column="0"
                        CornerRadius="26,0,0,26"
                        Background="{StaticResource SidebarGradient}"
                        MouseLeftButtonDown="Sidebar_MouseLeftButtonDown">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Brand -->
                        <StackPanel Margin="14,16,14,10" HorizontalAlignment="Center">
                            <TextBlock Text="The First"
                                       Foreground="White"
                                       FontSize="22"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="Smart ERP System"
                                       Foreground="#CCFFFFFF"
                                       FontSize="11"
                                       Margin="0,4,0,0"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>

                        <!-- Quick glance card -->
                        <Border Grid.Row="1"
                                Margin="14,6,14,10"
                                CornerRadius="16"
                                Background="#16FFFFFF"
                                Padding="12"
                                Effect="{StaticResource SoftGlow}">
                            <StackPanel>
                                <TextBlock Text="نظرة سريعة"
                                           Foreground="#EEFFFFFF"
                                           FontWeight="SemiBold"
                                           FontSize="12"
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="إدارة المخزون • فواتير • طلبات • محاسبين"
                                           Foreground="#CCFFFFFF"
                                           FontSize="10"
                                           Margin="0,6,0,0"
                                           TextAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <!-- Navigation List -->
                        <ListBox x:Name="NavListBox"
                                 Grid.Row="2"
                                 SelectionChanged="NavListBox_SelectionChanged"
                                 Style="{StaticResource NavListStyle}"
                                 ItemContainerStyle="{StaticResource NavItemStyle}"
                                 Margin="8,0,8,0">

                            <!-- ✅ NEW -->
                            <ListBoxItem Tag="Dashboard" Content="📊 الداشبورد"/>

                            <ListBoxItem Tag="Users" Content="👤 المستخدمين"/>
                            <ListBoxItem Tag="Inventory" Content="📦 المخزون"/>
                            <ListBoxItem Tag="Invoices" Content="🧾 الفواتير"/>
                            <ListBoxItem Tag="Payments" Content="💳 المدفوعات"/>
                            <ListBoxItem Tag="Orders" Content="🛒 الطلبات"/>
                            <ListBoxItem Tag="Expenses" Content="💰 المصروفات"/>
                            <ListBoxItem Tag="Items" Content="🏷️ الأصناف"/>
                            <ListBoxItem Tag="Suppliers" Content="🚚 الموردين"/>
                            <ListBoxItem Tag="Auth" Content="🔐 المصادقة"/>

                        </ListBox>

                        <!-- Window Controls -->
                        <StackPanel Grid.Row="3"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,12,0,14">

                            <!-- Close -->
                            <Button Width="48" Height="40" Margin="7,0"
                                    Background="#E11D48" Foreground="White"
                                    BorderThickness="0"
                                    Content="✕"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Cursor="Hand"
                                    Click="Close_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="Bd"
                                                CornerRadius="14"
                                                Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.92"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.82"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <!-- Max/Restore -->
                            <Button Width="48" Height="40" Margin="7,0"
                                    Background="#1F2937" Foreground="White"
                                    BorderThickness="0"
                                    Content="▢"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Cursor="Hand"
                                    Click="Max_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="Bd"
                                                CornerRadius="14"
                                                Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.92"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.82"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <!-- Minimize -->
                            <Button Width="48" Height="40" Margin="7,0"
                                    Background="#111827" Foreground="White"
                                    BorderThickness="0"
                                    Content="—"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Cursor="Hand"
                                    Click="Min_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="Bd"
                                                CornerRadius="14"
                                                Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.92"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="Bd" Property="Opacity" Value="0.82"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ===== Main area ===== -->
                <Grid Grid.Column="1" Margin="18">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Main Content -->
                    <Border Grid.Row="0"
                            Background="White"
                            CornerRadius="18"
                            BorderThickness="1"
                            BorderBrush="#E8EAF2">
                        <Frame x:Name="MainFrame"
                               NavigationUIVisibility="Hidden"
                               Background="Transparent"/>
                    </Border>
                </Grid>

            </Grid>
        </Border>
    </Grid>
</Window>
