<Page x:Class="erp.Views.Returns.ReturnsOrderItemsView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="المرتجعات"
      FlowDirection="RightToLeft">

    <Grid>

        <!-- ===== NavBar ===== -->
        <Border Background="#2D3748"
                Padding="12">
            <DockPanel>

                <!-- أزرار -->
                <StackPanel Orientation="Horizontal"
                            DockPanel.Dock="Left">
                    <Button Content="رجوع"
                            Width="80"
                            Margin="0,0,8,0"
                            Click="Back_Click"/>

                    <Button Content="إنشاء مرتجع"
                            Width="120"
                            Click="CreateReturn_Click"/>
                </StackPanel>

                <!-- العنوان -->
                <TextBlock Text="المرتجعات"
                           Foreground="White"
                           FontSize="18"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           DockPanel.Dock="Right"/>
            </DockPanel>
        </Border>

        <!-- ===== محتوى الصفحة ===== -->
        <Grid Margin="16" VerticalAlignment="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- إدخال رقم الطلب -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                <TextBlock Text="رقم الطلب:" VerticalAlignment="Center"/>
                <TextBox x:Name="OrderIdTextBox"
                         Width="350"
                         Margin="10,0,10,0"/>
                <Button Content="تحميل"
                        Width="80"
                        Click="Load_Click"/>
            </StackPanel>

            <!-- الأصناف -->
            <ScrollViewer Grid.Row="1">
                <ItemsControl ItemsSource="{Binding OrderItems}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#CCC"
                                    BorderThickness="1"
                                    Padding="10"
                                    Margin="0,6">
                                <StackPanel>

                                    <TextBlock Text="{Binding ProductId}"
                                               FontWeight="Bold"/>

                                    <TextBlock>
                                        <Run Text="الكمية: "/>
                                        <Run Text="{Binding Quantity}"/>
                                        <Run Text="   السعر: "/>
                                        <Run Text="{Binding UnitPrice}"/>
                                    </TextBlock>

                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                        <TextBlock Text="كمية المرتجع:" Width="100"/>
                                        <TextBox Width="60"
                                                 Text="{Binding ReturnQuantity,
                                                 UpdateSourceTrigger=PropertyChanged}"/>
                                    </StackPanel>

                                    <TextBlock Text="سبب الإرجاع"
                                               Margin="0,8,0,2"/>

                                    <TextBox Text="{Binding Reason,
                                            UpdateSourceTrigger=PropertyChanged}"
                                             Height="30"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>

    </Grid>
</Page>
