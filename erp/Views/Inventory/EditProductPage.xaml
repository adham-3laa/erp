<Page x:Class="erp.Views.Inventory.EditProductPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{StaticResource PageBgBrush}"
      FlowDirection="RightToLeft">

    <!-- ================= Resources ================= -->
    <Page.Resources>

        <DropShadowEffect x:Key="PrimaryOutlineGlow"
                          Color="{Binding Color, Source={StaticResource PrimaryBrush}}"
                          BlurRadius="18"
                          ShadowDepth="0"
                          Opacity="0.30"/>

        <!-- Main Card -->
        <Style x:Key="EditCardStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Background" Value="{StaticResource CardBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource SoftBorderBrush}"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Effect" Value="{StaticResource PrimaryOutlineGlow}"/>
        </Style>

        <!-- Field title -->
        <Style x:Key="FieldTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
            <Setter Property="Margin" Value="0,14,0,6"/>
        </Style>

        <!-- TextBox (safe) -->
        <Style x:Key="EditTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="38"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>

    </Page.Resources>

    <!-- ================= Layout ================= -->
    <Grid Margin="28">
        <Border Style="{StaticResource EditCardStyle}"
                Width="640"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- ================= Header ================= -->
                <Grid Grid.Row="0" Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Content="⬅ رجوع"
                            Width="110"
                            Height="40"
                            Style="{StaticResource DarkButtonStyle}"
                            Click="Back_Click"/>

                    <TextBlock Grid.Column="1"
                               Text="تعديل المنتج"
                               FontSize="26"
                               FontWeight="Bold"
                               Foreground="{StaticResource TextDarkBrush}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Grid>

                <!-- ================= Form ================= -->
                <StackPanel Grid.Row="1">

                    <TextBlock Text="اسم المنتج" Style="{StaticResource FieldTitleStyle}"/>
                    <Border CornerRadius="10"
                            BorderThickness="1"
                            BorderBrush="{StaticResource SoftBorderBrush}">
                        <TextBox Text="{Binding Name}"
                                 Style="{StaticResource EditTextBoxStyle}"/>
                    </Border>

                    <Grid Margin="0,16,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,12,0">
                            <TextBlock Text="سعر البيع" Style="{StaticResource FieldTitleStyle}"/>
                            <Border CornerRadius="10"
                                    BorderThickness="1"
                                    BorderBrush="{StaticResource SoftBorderBrush}">
                                <TextBox x:Name="SalePriceTextBox"
                                         Text="{Binding SalePrice}"
                                         Style="{StaticResource EditTextBoxStyle}"
                                         FlowDirection="LeftToRight"/>
                            </Border>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="سعر الشراء" Style="{StaticResource FieldTitleStyle}"/>
                            <Border CornerRadius="10"
                                    BorderThickness="1"
                                    BorderBrush="{StaticResource SoftBorderBrush}">
                                <TextBox x:Name="BuyPriceTextBox"
                                         Text="{Binding BuyPrice}"
                                         Style="{StaticResource EditTextBoxStyle}"
                                         FlowDirection="LeftToRight"/>
                            </Border>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="الكمية" Style="{StaticResource FieldTitleStyle}"/>
                    <Border CornerRadius="10"
                            BorderThickness="1"
                            BorderBrush="{StaticResource SoftBorderBrush}">
                        <TextBox x:Name="QuantityTextBox"
                                 Text="{Binding Quantity}"
                                 Style="{StaticResource EditTextBoxStyle}"
                                 FlowDirection="LeftToRight"/>
                    </Border>

                    <TextBlock Text="اسم الصنف" Style="{StaticResource FieldTitleStyle}"/>
                    <Border CornerRadius="10"
                            BorderThickness="1"
                            BorderBrush="{StaticResource SoftBorderBrush}">
                        <TextBox Text="{Binding Category}"
                                 Style="{StaticResource EditTextBoxStyle}"/>
                    </Border>

                    <TextBlock Text="الوصف" Style="{StaticResource FieldTitleStyle}"/>
                    <Border CornerRadius="10"
                            BorderThickness="1"
                            BorderBrush="{StaticResource SoftBorderBrush}">
                        <TextBox Text="{Binding Description}"
                                 Height="90"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 Style="{StaticResource EditTextBoxStyle}"/>
                    </Border>

                </StackPanel>

                <!-- ================= Actions ================= -->
                <StackPanel Grid.Row="2"
                            Orientation="Horizontal"
                            HorizontalAlignment="Left"
                            Margin="0,28,0,0">

                    <Button Content="حفظ التعديلات"
                            Width="180"
                            Height="44"
                            Style="{StaticResource DarkButtonStyle}"
                            Click="Save_Click"/>
                </StackPanel>

            </Grid>
        </Border>
    </Grid>
</Page>
